{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.reducer = exports.actionCreators = void 0;\nvar apiUrl = \"http://localhost:42899/\"; // ----------------\n// ACTION CREATORS - These are functions exposed to UI components that will trigger a state transition.\n// They don't directly mutate state, but they can have external side-effects (such as loading data).\n\nexports.actionCreators = {\n  requestVehiculos: function requestVehiculos(page, items) {\n    return function (dispatch, getState) {\n      // Only load data if it's something we don't already have (and are not already loading)\n      var appState = getState();\n      console.log(\"Trying to get Vehiculos. Page: \" + page + \", Items: \" + items);\n\n      if (appState && appState.tablaVehiculos) {\n        fetch(apiUrl + 'api/Vehiculo/getVehiculos?Page=' + page + '&Items=' + items, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'mode': 'cors'\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          return dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: []\n        });\n      }\n    };\n  },\n  selectVehiculo: function selectVehiculo(v) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        dispatch({\n          type: 'SELECT_VEHICULOS',\n          selectedVehiculo: v\n        });\n      }\n    };\n  },\n  addVehiculo: function addVehiculo(v) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        fetch(apiUrl + 'api/Vehiculo/addVehiculo', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'mode': 'cors'\n          },\n          body: JSON.stringify(v)\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          return dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: []\n        });\n      }\n    };\n  },\n  editVehiculo: function editVehiculo(v) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        fetch(apiUrl + 'api/Vehiculo/update', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'mode': 'cors'\n          },\n          body: JSON.stringify(v)\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          return dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: []\n        });\n      }\n    };\n  },\n  closeModal: function closeModal() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        dispatch({\n          type: 'CLOSE_MODAL'\n        });\n      }\n    };\n  },\n  openEmptyModal: function openEmptyModal() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        dispatch({\n          type: 'OPEN_EMPTY_MODAL'\n        });\n      }\n    };\n  },\n  changeItems: function changeItems(newNumItems) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        dispatch({\n          type: 'CHANGE_ITEMS',\n          numItems: newNumItems\n        });\n      }\n    };\n  },\n  nextPage: function nextPage() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        dispatch({\n          type: 'NEXT_PAGE',\n          newPage: appState.tablaVehiculos.page + 1\n        });\n      }\n    };\n  },\n  previousPage: function previousPage() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var correctNewPage = appState.tablaVehiculos.page - 1;\n\n        if (correctNewPage < 0) {\n          correctNewPage = 0;\n        }\n\n        dispatch({\n          type: 'PREVIOUS_PAGE',\n          newPage: correctNewPage\n        });\n      }\n    };\n  },\n  typeFechaEntrega: function typeFechaEntrega(d) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var currentSelectedVehiculo = appState.tablaVehiculos.selectedVehiculo;\n\n        if (currentSelectedVehiculo != null && currentSelectedVehiculo.fechaEntrega != undefined) {\n          currentSelectedVehiculo.fechaEntrega = d;\n        }\n\n        console.log(currentSelectedVehiculo);\n        dispatch({\n          type: 'TYPE_FECHA_ENTREGA',\n          selectedVehiculo: currentSelectedVehiculo\n        });\n      }\n    };\n  }\n}; // ----------------\n// REDUCER - For a given state and action, returns the new state. To support time travel, this must not mutate the old state.\n\nvar unloadedState = {\n  vehiculos: [{\n    numPedido: 1,\n    bastidor: 21,\n    matricula: \"4139HJK\",\n    modelo: \"Seat Ibiza\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 2,\n    bastidor: 22,\n    matricula: \"4139HJL\",\n    modelo: \"Seat Tarraco\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 3,\n    bastidor: 23,\n    matricula: \"4139HJM\",\n    modelo: \"Seat Marbella\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 4,\n    bastidor: 22,\n    matricula: \"4139HJN\",\n    modelo: \"Fiat Multipla\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 5,\n    bastidor: 23,\n    matricula: \"4139HJO\",\n    modelo: \"Nissan Patrol\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 6,\n    bastidor: 22,\n    matricula: \"4139HJP\",\n    modelo: \"Opel Corsa\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 7,\n    bastidor: 23,\n    matricula: \"4139HJQ\",\n    modelo: \"Opel Astra\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 8,\n    bastidor: 22,\n    matricula: \"4139HJR\",\n    modelo: \"Seat León\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 9,\n    bastidor: 23,\n    matricula: \"4139HJS\",\n    modelo: \"Dacia Sandero\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 10,\n    bastidor: 22,\n    matricula: \"4139HJT\",\n    modelo: \"Audi TT\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 11,\n    bastidor: 23,\n    matricula: \"4139HJU\",\n    modelo: \"Peugeot 206\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 12,\n    bastidor: 22,\n    matricula: \"4139HJV\",\n    modelo: \"Peugeot 207\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 13,\n    bastidor: 23,\n    matricula: \"4139HJW\",\n    modelo: \"Peugeot 208\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 14,\n    bastidor: 22,\n    matricula: \"4139HJX\",\n    modelo: \"Peugeot 307\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 15,\n    bastidor: 23,\n    matricula: \"4139HJY\",\n    modelo: \"Volkswagen Golf\",\n    fechaEntrega: \"2022-05-27\"\n  }],\n  items: 0,\n  page: 0,\n  isLoading: false,\n  selectedVehiculo: null,\n  modalIsOpen: false,\n  modalNumPedido: null,\n  modalBastidor: null,\n  modalModelo: null,\n  modalMatricula: null,\n  modalFechaEntrega: null\n};\n\nvar reducer = function reducer(state, incomingAction) {\n  if (state === undefined) {\n    return unloadedState;\n  }\n\n  var action = incomingAction;\n\n  switch (action.type) {\n    case 'REQUEST_VEHICULOS':\n      return __assign(__assign({}, state), {\n        isLoading: true\n      });\n\n    case 'RECEIVE_VEHICULOS':\n      // Only accept the incoming data if it matches the most recent request. This ensures we correctly\n      // handle out-of-order responses.\n      return __assign(__assign({}, state), {\n        vehiculos: action.vehiculos,\n        modalIsOpen: false,\n        isLoading: false,\n        page: 0,\n        selectedVehiculo: null\n      });\n\n    case 'SELECT_VEHICULOS':\n      return __assign(__assign({}, state), {\n        selectedVehiculo: action.selectedVehiculo,\n        modalIsOpen: true\n      });\n\n    case 'ADD_VEHICULOS':\n      return __assign(__assign({}, state), {\n        isLoading: true\n      });\n\n    case 'OPEN_EMPTY_MODAL':\n      return __assign(__assign({}, state), {\n        modalIsOpen: true\n      });\n\n    case 'CLOSE_MODAL':\n      return __assign(__assign({}, state), {\n        modalIsOpen: false,\n        selectedVehiculo: null\n      });\n\n    case 'CHANGE_ITEMS':\n      return __assign(__assign({}, state), {\n        items: action.numItems\n      });\n\n    case 'NEXT_PAGE':\n      return __assign(__assign({}, state), {\n        page: action.newPage\n      });\n\n    case 'PREVIOUS_PAGE':\n      return __assign(__assign({}, state), {\n        page: action.newPage\n      });\n\n    case 'TYPE_FECHA_ENTREGA':\n      return __assign(__assign({}, state), {\n        selectedVehiculo: action.selectedVehiculo\n      });\n\n    default:\n      return state;\n  }\n};\n\nexports.reducer = reducer;","map":{"version":3,"mappings":"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","names":["apiUrl","exports","requestVehiculos","page","items","dispatch","getState","appState","console","log","tablaVehiculos","fetch","method","headers","then","json","type","vehiculos","data","selectVehiculo","v","selectedVehiculo","addVehiculo","body","JSON","stringify","editVehiculo","closeModal","openEmptyModal","changeItems","newNumItems","numItems","nextPage","newPage","previousPage","correctNewPage","typeFechaEntrega","d","currentSelectedVehiculo","fechaEntrega","undefined","unloadedState","numPedido","bastidor","matricula","modelo","isLoading","modalIsOpen","modalNumPedido","modalBastidor","modalModelo","modalMatricula","modalFechaEntrega","reducer","state","incomingAction","action"],"sources":["C:\\Users\\manue\\Downloads\\97b922f26a01\\Prueba\\AcercaTest\\Vehiculos_FRONT\\ClientApp\\src\\store\\TablaVehiculos.ts"],"sourcesContent":["﻿import { Action, Reducer } from 'redux';\r\nimport { AppThunkAction } from './';\r\nimport { routerActions } from 'connected-react-router';\r\nimport App from '../App';\r\nimport { parsePath } from 'history';\r\n\r\nconst apiUrl = \"http://localhost:42899/\";\r\n\r\n// -----------------\r\n// STATE - This defines the type of data maintained in the Redux store.\r\n\r\nexport interface TablaVehiculosState {\r\n    isLoading: boolean;\r\n    items: number;\r\n    page: number;\r\n    vehiculos: Vehiculo[];\r\n    selectedVehiculo: Vehiculo | null;\r\n    modalIsOpen: boolean;\r\n    modalNumPedido: number | null;\r\n    modalBastidor: number | null;\r\n    modalModelo: string | null;\r\n    modalMatricula: string | null;\r\n    modalFechaEntrega: string | null;\r\n    \r\n}\r\n\r\n\r\nexport interface Vehiculo {\r\n    numPedido: number;\r\n    bastidor: number;\r\n    modelo: string;\r\n    matricula: string;\r\n    fechaEntrega: string;\r\n}\r\n\r\n// -----------------\r\n// ACTIONS - These are serializable (hence replayable) descriptions of state transitions.\r\n// They do not themselves have any side-effects; they just describe something that is going to happen.\r\n\r\ninterface RequestTablaVehiculosAction {\r\n    page: number;\r\n    items: number;\r\n    type: 'REQUEST_VEHICULOS';\r\n}\r\n\r\ninterface ReceiveTablaVehiculosAction {\r\n    type: 'RECEIVE_VEHICULOS';\r\n    vehiculos: Vehiculo[];\r\n}\r\n\r\ninterface SelectVehiculoTablaVehiculosAction {\r\n    type: 'SELECT_VEHICULOS';\r\n    selectedVehiculo: Vehiculo | null;\r\n}\r\n\r\ninterface AddVehiculoTablaVehiculosAction {\r\n    type: 'ADD_VEHICULOS';\r\n    newVehiculo: Vehiculo | null | undefined;\r\n}\r\n\r\ninterface EditVehiculoTablaVehiculosAction {\r\n    type: 'EDIT_VEHICULO';\r\n    numPedido: number;\r\n    bastidor: number;\r\n    modelo: string;\r\n    matricula: string;\r\n    fechaEntrega: string;\r\n}\r\n\r\ninterface TypeNumPedidoTablaVehiculosAction {\r\n    type: 'TYPE_NUM_PEDIDO';\r\n    numPedido: number;\r\n}\r\ninterface TypeBastidorTablaVehiculosAction {\r\n    type: 'TYPE_BASTIDOR';\r\n    bastidor: number;\r\n}\r\ninterface TypeModeloTablaVehiculosAction {\r\n    type: 'TYPE_MODELO';\r\n    modelo: number;\r\n}\r\ninterface TypeMatriculaTablaVehiculosAction {\r\n    type: 'TYPE_MATRICULA';\r\n    matricula: number;\r\n}\r\ninterface TypeFechaEntregaTablaVehiculosAction {\r\n    type: 'TYPE_FECHA_ENTREGA';\r\n    selectedVehiculo: Vehiculo | null;\r\n}\r\n\r\ninterface CloseModalTablaVehiculosAction {\r\n    type: 'CLOSE_MODAL';\r\n}\r\n\r\ninterface OpenEmptyModalTablaVehiculosAction {\r\n    type: 'OPEN_EMPTY_MODAL';\r\n}\r\n\r\ninterface ChangeItemsTablaVehiculosAction {\r\n    type: 'CHANGE_ITEMS';\r\n    numItems: number;\r\n}\r\ninterface NextPageTablaVehiculosAction {\r\n    type: 'NEXT_PAGE';\r\n    newPage: number;\r\n}\r\n\r\ninterface PreviousPageTablaVehiculosAction {\r\n    type: 'PREVIOUS_PAGE';\r\n    newPage: number;\r\n}\r\n\r\n// Declare a 'discriminated union' type. This guarantees that all references to 'type' properties contain one of the\r\n// declared type strings (and not any other arbitrary string).\r\ntype KnownAction =\r\n    RequestTablaVehiculosAction |\r\n    ReceiveTablaVehiculosAction |\r\n    SelectVehiculoTablaVehiculosAction |\r\n    AddVehiculoTablaVehiculosAction |\r\n    CloseModalTablaVehiculosAction |\r\n    OpenEmptyModalTablaVehiculosAction |\r\n    ChangeItemsTablaVehiculosAction |\r\n    NextPageTablaVehiculosAction |\r\n    PreviousPageTablaVehiculosAction |\r\n    EditVehiculoTablaVehiculosAction |\r\n    TypeNumPedidoTablaVehiculosAction |\r\n    TypeBastidorTablaVehiculosAction |\r\n    TypeModeloTablaVehiculosAction |\r\n    TypeMatriculaTablaVehiculosAction |\r\n    TypeFechaEntregaTablaVehiculosAction\r\n\r\n\r\n\r\n// ----------------\r\n// ACTION CREATORS - These are functions exposed to UI components that will trigger a state transition.\r\n// They don't directly mutate state, but they can have external side-effects (such as loading data).\r\n\r\nexport const actionCreators = {\r\n    requestVehiculos: (page: number, items: number): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        // Only load data if it's something we don't already have (and are not already loading)\r\n        const appState = getState();\r\n        console.log(\"Trying to get Vehiculos. Page: \" + page + \", Items: \" + items);\r\n        if (appState && appState.tablaVehiculos) {\r\n            fetch(apiUrl + 'api/Vehiculo/getVehiculos?Page=' + page + '&Items=' + items, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'mode': 'cors'\r\n                }\r\n            }).then(response => response.json() as Promise<Vehiculo[]>)\r\n                .then(data => {\r\n                     return dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data });\r\n                });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: []  });\r\n        }\r\n    },\r\n\r\n    selectVehiculo: (v: Vehiculo): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            var newSelectedVehiculo = v;\r\n            dispatch({ type: 'SELECT_VEHICULOS', selectedVehiculo: newSelectedVehiculo });\r\n        }\r\n    },\r\n\r\n    addVehiculo: (v: Vehiculo): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            fetch(apiUrl + 'api/Vehiculo/addVehiculo', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'mode': 'cors'\r\n                },\r\n                body: JSON.stringify(v)\r\n            })\r\n            .then(response => response.json() as Promise<Vehiculo[]>)\r\n            .then(data => {\r\n                return dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data });\r\n            });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: [] });\r\n        }\r\n    },\r\n\r\n    editVehiculo: (v: Vehiculo): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            fetch(apiUrl + 'api/Vehiculo/update', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'mode': 'cors'\r\n                },\r\n                body: JSON.stringify(v)\r\n            })\r\n                .then(response => response.json() as Promise<Vehiculo[]>)\r\n                .then(data => {\r\n                    return dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data });\r\n                });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: [] });\r\n        }\r\n    },\r\n\r\n    closeModal: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            dispatch({ type: 'CLOSE_MODAL' });\r\n        }\r\n    },\r\n\r\n    openEmptyModal: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            dispatch({ type: 'OPEN_EMPTY_MODAL' });\r\n        }\r\n    },\r\n\r\n    changeItems: (newNumItems: number): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            dispatch({ type: 'CHANGE_ITEMS', numItems: newNumItems });\r\n        }\r\n    },\r\n\r\n\r\n    nextPage: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            dispatch({ type: 'NEXT_PAGE', newPage: appState.tablaVehiculos.page + 1 });\r\n        }\r\n    },\r\n\r\n    previousPage: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            var correctNewPage = appState.tablaVehiculos.page - 1;\r\n            if (correctNewPage < 0) {\r\n                correctNewPage = 0;\r\n            }\r\n            dispatch({ type: 'PREVIOUS_PAGE', newPage: correctNewPage });\r\n        }\r\n    },\r\n\r\n    typeFechaEntrega: (d: string): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            var currentSelectedVehiculo = appState.tablaVehiculos.selectedVehiculo;\r\n            if (currentSelectedVehiculo != null && currentSelectedVehiculo.fechaEntrega != undefined) {\r\n                currentSelectedVehiculo.fechaEntrega = d;\r\n            }\r\n            console.log(currentSelectedVehiculo);\r\n            dispatch({ type: 'TYPE_FECHA_ENTREGA', selectedVehiculo: currentSelectedVehiculo });\r\n        }\r\n    }\r\n\r\n\r\n};\r\n\r\n// ----------------\r\n// REDUCER - For a given state and action, returns the new state. To support time travel, this must not mutate the old state.\r\n\r\nconst unloadedState: TablaVehiculosState =\r\n{\r\n    vehiculos: [\r\n        { numPedido: 1, bastidor: 21, matricula: \"4139HJK\", modelo: \"Seat Ibiza\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 2, bastidor: 22, matricula: \"4139HJL\", modelo: \"Seat Tarraco\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 3, bastidor: 23, matricula: \"4139HJM\", modelo: \"Seat Marbella\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 4, bastidor: 22, matricula: \"4139HJN\", modelo: \"Fiat Multipla\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 5, bastidor: 23, matricula: \"4139HJO\", modelo: \"Nissan Patrol\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 6, bastidor: 22, matricula: \"4139HJP\", modelo: \"Opel Corsa\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 7, bastidor: 23, matricula: \"4139HJQ\", modelo: \"Opel Astra\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 8, bastidor: 22, matricula: \"4139HJR\", modelo: \"Seat León\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 9, bastidor: 23, matricula: \"4139HJS\", modelo: \"Dacia Sandero\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 10, bastidor: 22, matricula: \"4139HJT\", modelo: \"Audi TT\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 11, bastidor: 23, matricula: \"4139HJU\", modelo: \"Peugeot 206\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 12, bastidor: 22, matricula: \"4139HJV\", modelo: \"Peugeot 207\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 13, bastidor: 23, matricula: \"4139HJW\", modelo: \"Peugeot 208\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 14, bastidor: 22, matricula: \"4139HJX\", modelo: \"Peugeot 307\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 15, bastidor: 23, matricula: \"4139HJY\", modelo: \"Volkswagen Golf\", fechaEntrega: \"2022-05-27\" }\r\n    ],\r\n    items: 0,\r\n    page: 0,\r\n    isLoading: false,\r\n    selectedVehiculo: null,\r\n    modalIsOpen: false,\r\n    modalNumPedido: null,\r\n    modalBastidor: null,\r\n    modalModelo: null,\r\n    modalMatricula: null,\r\n    modalFechaEntrega: null\r\n};\r\n\r\nexport const reducer: Reducer<TablaVehiculosState> = (state: TablaVehiculosState | undefined, incomingAction: Action): TablaVehiculosState => {\r\n    if (state === undefined) {\r\n        return unloadedState;\r\n    }\r\n\r\n    const action = incomingAction as KnownAction;\r\n    switch (action.type) {\r\n        case 'REQUEST_VEHICULOS':\r\n            return {\r\n                ...state,\r\n                isLoading: true\r\n            };\r\n        case 'RECEIVE_VEHICULOS':\r\n            // Only accept the incoming data if it matches the most recent request. This ensures we correctly\r\n            // handle out-of-order responses.\r\n            return {\r\n                ...state,\r\n                vehiculos: action.vehiculos,\r\n                modalIsOpen: false,\r\n                isLoading: false,\r\n                page: 0,\r\n                selectedVehiculo: null\r\n            };\r\n        case 'SELECT_VEHICULOS':\r\n            return {\r\n                ...state,\r\n                selectedVehiculo: action.selectedVehiculo,\r\n                modalIsOpen: true\r\n            };\r\n        case 'ADD_VEHICULOS':\r\n            return {\r\n                ...state,\r\n                isLoading: true\r\n            };\r\n        case 'OPEN_EMPTY_MODAL':\r\n            return {\r\n                ...state,\r\n                modalIsOpen: true\r\n            };\r\n\r\n        case 'CLOSE_MODAL':\r\n            return {\r\n                ...state,\r\n                modalIsOpen: false,\r\n                selectedVehiculo: null\r\n            };\r\n        case 'CHANGE_ITEMS':\r\n            return {\r\n                ...state,\r\n                items: action.numItems\r\n            };\r\n        case 'NEXT_PAGE':\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n\r\n        case 'PREVIOUS_PAGE':\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case 'TYPE_FECHA_ENTREGA':\r\n            return {\r\n                ...state,\r\n                selectedVehiculo: action.selectedVehiculo\r\n            };\r\n        default:\r\n            return state;\r\n\r\n\r\n    }\r\n\r\n};\r\n"]},"metadata":{},"sourceType":"module"}