{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.reducer = exports.actionCreators = void 0;\nvar apiUrl = \"https://localhost:44364/\"; // ----------------\n// ACTION CREATORS - These are functions exposed to UI components that will trigger a state transition.\n// They don't directly mutate state, but they can have external side-effects (such as loading data).\n\nexports.actionCreators = {\n  requestVehiculos: function requestVehiculos(page, items) {\n    return function (dispatch, getState) {\n      // Only load data if it's something we don't already have (and are not already loading)\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        fetch(apiUrl + 'api/vehiculos/getVehiculos?Page=' + page + '&Items=' + items, {\n          method: 'GET',\n          referrerPolicy: 'strict-origin-when-cross-origin',\n          headers: {\n            'Content-Type': 'application/json',\n            'mode': 'cors',\n            'Origin': apiUrl\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data,\n            loadedVehiculos: true\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: [],\n          loadedVehiculos: false\n        });\n      }\n    };\n  },\n  selectVehiculo: function selectVehiculo(v) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var newSelectedVehiculo = __assign({}, v);\n\n        dispatch({\n          type: 'SELECT_VEHICULOS',\n          selectedVehiculo: newSelectedVehiculo\n        });\n      }\n    };\n  },\n  addVehiculo: function addVehiculo() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var newVehiculo;\n        newVehiculo = {\n          numPedido: appState.tablaVehiculos.modalNumPedido == null ? 0 : appState.tablaVehiculos.modalNumPedido,\n          bastidor: appState.tablaVehiculos.modalBastidor == null ? \"\" : appState.tablaVehiculos.modalBastidor,\n          modelo: appState.tablaVehiculos.modalModelo == null ? \"\" : appState.tablaVehiculos.modalModelo,\n          matricula: appState.tablaVehiculos.modalMatricula == null ? \"\" : appState.tablaVehiculos.modalMatricula,\n          fechaEntrega: appState.tablaVehiculos.modalFechaEntrega == null ? \"\" : appState.tablaVehiculos.modalFechaEntrega\n        };\n        console.log(newVehiculo);\n        fetch(apiUrl + 'api/vehiculos/addVehiculo', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'mode': 'cors'\n          },\n          body: JSON.stringify(newVehiculo)\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data,\n            loadedVehiculos: true\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: [],\n          loadedVehiculos: false\n        });\n      }\n    };\n  },\n  editVehiculo: function editVehiculo() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var v = appState.tablaVehiculos.selectedVehiculo;\n        fetch(apiUrl + 'api/vehiculos/update', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'mode': 'cors'\n          },\n          body: JSON.stringify(v)\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data,\n            loadedVehiculos: true\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: [],\n          loadedVehiculos: false\n        });\n      }\n    };\n  },\n  deleteVehiculo: function deleteVehiculo(v) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var v = appState.tablaVehiculos.selectedVehiculo;\n        fetch(apiUrl + 'api/vehiculos/delete', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'mode': 'cors'\n          },\n          body: JSON.stringify(v)\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data,\n            loadedVehiculos: true\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: [],\n          loadedVehiculos: false\n        });\n      }\n    };\n  },\n  closeModal: function closeModal() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        dispatch({\n          type: 'CLOSE_MODAL',\n          selectedVehiculo: null\n        });\n      }\n    };\n  },\n  openEmptyModal: function openEmptyModal() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        dispatch({\n          type: 'OPEN_EMPTY_MODAL'\n        });\n      }\n    };\n  },\n  changeItems: function changeItems(newNumItems) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        fetch(apiUrl + 'api/vehiculos/getVehiculos?Page=' + appState.tablaVehiculos.page + '&Items=' + newNumItems, {\n          method: 'GET',\n          referrerPolicy: 'strict-origin-when-cross-origin',\n          headers: {\n            'Content-Type': 'application/json',\n            'mode': 'cors',\n            'Origin': apiUrl\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data,\n            loadedVehiculos: true\n          });\n          dispatch({\n            type: 'CHANGE_ITEMS',\n            numItems: newNumItems\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: [],\n          loadedVehiculos: false\n        });\n      }\n    };\n  },\n  nextPage: function nextPage() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var correctNewPage = appState.tablaVehiculos.page + 1;\n\n        if (appState.tablaVehiculos.items == 0) {\n          correctNewPage = 0;\n        }\n\n        fetch(apiUrl + 'api/vehiculos/getVehiculos?Page=' + correctNewPage + '&Items=' + appState.tablaVehiculos.items, {\n          method: 'GET',\n          referrerPolicy: 'strict-origin-when-cross-origin',\n          headers: {\n            'Content-Type': 'application/json',\n            'mode': 'cors',\n            'Origin': apiUrl\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data,\n            loadedVehiculos: true\n          });\n          dispatch({\n            type: 'NEXT_PAGE',\n            newPage: correctNewPage\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: [],\n          loadedVehiculos: false\n        });\n      }\n    };\n  },\n  previousPage: function previousPage() {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var correctNewPage = appState.tablaVehiculos.page - 1;\n\n        if (correctNewPage < 0) {\n          correctNewPage = 0;\n        }\n\n        fetch(apiUrl + 'api/vehiculos/getVehiculos?Page=' + correctNewPage + '&Items=' + appState.tablaVehiculos.items, {\n          method: 'GET',\n          referrerPolicy: 'strict-origin-when-cross-origin',\n          headers: {\n            'Content-Type': 'application/json',\n            'mode': 'cors',\n            'Origin': apiUrl\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          dispatch({\n            type: 'RECEIVE_VEHICULOS',\n            vehiculos: data,\n            loadedVehiculos: true\n          });\n          dispatch({\n            type: 'PREVIOUS_PAGE',\n            newPage: correctNewPage\n          });\n        });\n        dispatch({\n          type: 'RECEIVE_VEHICULOS',\n          vehiculos: [],\n          loadedVehiculos: false\n        });\n      }\n    };\n  },\n  typeFechaEntrega: function typeFechaEntrega(d) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var currentSelectedVehiculo = appState.tablaVehiculos.selectedVehiculo;\n\n        if (currentSelectedVehiculo != null && currentSelectedVehiculo.fechaEntrega != undefined) {\n          currentSelectedVehiculo.fechaEntrega = d;\n        }\n\n        dispatch({\n          type: 'TYPE_FECHA_ENTREGA',\n          selectedVehiculo: currentSelectedVehiculo\n        });\n      }\n    };\n  },\n  typeData: function typeData(data, dataType) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        dispatch({\n          type: 'TYPE_DATA_CREATE',\n          data: data,\n          dataType: dataType\n        });\n      }\n    };\n  },\n  editSelectedVehiculo: function editSelectedVehiculo(data, dataType) {\n    return function (dispatch, getState) {\n      var appState = getState();\n\n      if (appState && appState.tablaVehiculos) {\n        var editedSelectedVehiculo = __assign({}, appState.tablaVehiculos.selectedVehiculo);\n\n        switch (dataType) {\n          case 'NumPedido':\n            editedSelectedVehiculo.numPedido = parseInt(data);\n            break;\n\n          case 'Bastidor':\n            editedSelectedVehiculo.bastidor = data;\n            break;\n\n          case 'Modelo':\n            editedSelectedVehiculo.modelo = data;\n            break;\n\n          case 'Matricula':\n            editedSelectedVehiculo.matricula = data;\n            break;\n\n          case 'FechaEntrega':\n            editedSelectedVehiculo.fechaEntrega = data;\n            break;\n        }\n\n        dispatch({\n          type: 'TYPE_DATA_EDIT',\n          selectedVehiculo: editedSelectedVehiculo\n        });\n      }\n    };\n  }\n}; // ----------------\n// REDUCER - For a given state and action, returns the new state. To support time travel, this must not mutate the old state.\n\nvar unloadedState = {\n  vehiculos: [{\n    numPedido: 1,\n    bastidor: \"21\",\n    matricula: \"4139HJK\",\n    modelo: \"Seat Ibiza\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 2,\n    bastidor: \"22\",\n    matricula: \"4139HJL\",\n    modelo: \"Seat Tarraco\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 3,\n    bastidor: \"23\",\n    matricula: \"4139HJM\",\n    modelo: \"Seat Marbella\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 4,\n    bastidor: \"22\",\n    matricula: \"4139HJN\",\n    modelo: \"Fiat Multipla\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 5,\n    bastidor: \"23\",\n    matricula: \"4139HJO\",\n    modelo: \"Nissan Patrol\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 6,\n    bastidor: \"22\",\n    matricula: \"4139HJP\",\n    modelo: \"Opel Corsa\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 7,\n    bastidor: \"23\",\n    matricula: \"4139HJQ\",\n    modelo: \"Opel Astra\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 8,\n    bastidor: \"22\",\n    matricula: \"4139HJR\",\n    modelo: \"Seat León\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 9,\n    bastidor: \"23\",\n    matricula: \"4139HJS\",\n    modelo: \"Dacia Sandero\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 10,\n    bastidor: \"22\",\n    matricula: \"4139HJT\",\n    modelo: \"Audi TT\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 11,\n    bastidor: \"23\",\n    matricula: \"4139HJU\",\n    modelo: \"Peugeot 206\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 12,\n    bastidor: \"22\",\n    matricula: \"4139HJV\",\n    modelo: \"Peugeot 207\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 13,\n    bastidor: \"23\",\n    matricula: \"4139HJW\",\n    modelo: \"Peugeot 208\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 14,\n    bastidor: \"22\",\n    matricula: \"4139HJX\",\n    modelo: \"Peugeot 307\",\n    fechaEntrega: \"2022-05-27\"\n  }, {\n    numPedido: 15,\n    bastidor: \"23\",\n    matricula: \"4139HJY\",\n    modelo: \"Volkswagen Golf\",\n    fechaEntrega: \"2022-05-27\"\n  }],\n  items: 10,\n  page: 0,\n  isLoading: false,\n  selectedVehiculo: null,\n  modalIsOpen: false,\n  modalNumPedido: null,\n  modalBastidor: null,\n  modalModelo: null,\n  modalMatricula: null,\n  modalFechaEntrega: null,\n  loadedVehiculos: false\n};\n\nvar reducer = function reducer(state, incomingAction) {\n  if (state === undefined) {\n    return unloadedState;\n  }\n\n  var action = incomingAction;\n\n  switch (action.type) {\n    case 'REQUEST_VEHICULOS':\n      return __assign(__assign({}, state), {\n        isLoading: true\n      });\n\n    case 'RECEIVE_VEHICULOS':\n      // Only accept the incoming data if it matches the most recent request. This ensures we correctly\n      // handle out-of-order responses.\n      return __assign(__assign({}, state), {\n        vehiculos: action.vehiculos,\n        modalIsOpen: false,\n        isLoading: false,\n        page: 0,\n        items: 10,\n        selectedVehiculo: null,\n        loadedVehiculos: action.loadedVehiculos,\n        modalBastidor: null,\n        modalNumPedido: null,\n        modalMatricula: null,\n        modalModelo: null,\n        modalFechaEntrega: null\n      });\n\n    case 'SELECT_VEHICULOS':\n      return __assign(__assign({}, state), {\n        selectedVehiculo: action.selectedVehiculo,\n        modalIsOpen: true\n      });\n\n    case 'ADD_VEHICULOS':\n      return __assign(__assign({}, state), {\n        isLoading: true\n      });\n\n    case 'OPEN_EMPTY_MODAL':\n      return __assign(__assign({}, state), {\n        modalIsOpen: true,\n        selectedVehiculo: null\n      });\n\n    case 'CLOSE_MODAL':\n      return __assign(__assign({}, state), {\n        modalIsOpen: false,\n        selectedVehiculo: null,\n        modalBastidor: null,\n        modalFechaEntrega: null,\n        modalMatricula: null,\n        modalModelo: null,\n        modalNumPedido: null\n      });\n\n    case 'CHANGE_ITEMS':\n      return __assign(__assign({}, state), {\n        items: action.numItems\n      });\n\n    case 'NEXT_PAGE':\n      return __assign(__assign({}, state), {\n        page: action.newPage\n      });\n\n    case 'PREVIOUS_PAGE':\n      return __assign(__assign({}, state), {\n        page: action.newPage\n      });\n\n    case 'TYPE_FECHA_ENTREGA':\n      return __assign(__assign({}, state), {\n        selectedVehiculo: action.selectedVehiculo\n      });\n\n    case 'TYPE_DATA_CREATE':\n      switch (action.dataType) {\n        case 'NumPedido':\n          return __assign(__assign({}, state), {\n            modalNumPedido: parseInt(action.data)\n          });\n\n        case 'Bastidor':\n          return __assign(__assign({}, state), {\n            modalBastidor: action.data\n          });\n\n        case 'Modelo':\n          return __assign(__assign({}, state), {\n            modalModelo: action.data\n          });\n\n        case 'Matricula':\n          return __assign(__assign({}, state), {\n            modalMatricula: action.data\n          });\n\n        case 'FechaEntrega':\n          return __assign(__assign({}, state), {\n            modalFechaEntrega: action.data\n          });\n\n        default:\n          return state;\n      }\n\n      ;\n\n    case 'TYPE_DATA_EDIT':\n      return __assign(__assign({}, state), {\n        selectedVehiculo: action.selectedVehiculo\n      });\n\n    default:\n      return state;\n  }\n};\n\nexports.reducer = reducer;","map":{"version":3,"mappings":"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","names":["apiUrl","exports","requestVehiculos","page","items","dispatch","getState","appState","tablaVehiculos","fetch","method","referrerPolicy","headers","then","json","type","vehiculos","data","loadedVehiculos","selectVehiculo","v","newSelectedVehiculo","selectedVehiculo","addVehiculo","newVehiculo","numPedido","modalNumPedido","bastidor","modalBastidor","modelo","modalModelo","matricula","modalMatricula","fechaEntrega","modalFechaEntrega","console","log","body","JSON","stringify","editVehiculo","deleteVehiculo","newNumItems","response","numItems","correctNewPage","newPage","d","currentSelectedVehiculo","undefined","dataType","editedSelectedVehiculo","parseInt","unloadedState","isLoading","modalIsOpen","reducer","state","incomingAction","action","__assign"],"sources":["C:\\Users\\manue\\Downloads\\97b922f26a01\\Prueba\\AcercaTest\\Vehiculos_FRONT\\ClientApp\\src\\store\\TablaVehiculos.ts"],"sourcesContent":["﻿import { Action, Reducer } from 'redux';\r\nimport { AppThunkAction } from './';\r\nimport { routerActions } from 'connected-react-router';\r\nimport App from '../App';\r\nimport { parsePath } from 'history';\r\n\r\nconst apiUrl = \"https://localhost:44364/\";\r\n\r\n// -----------------\r\n// STATE - This defines the type of data maintained in the Redux store.\r\n\r\nexport interface TablaVehiculosState {\r\n    isLoading: boolean;\r\n    items: number;\r\n    page: number;\r\n    vehiculos: Vehiculo[];\r\n    selectedVehiculo: Vehiculo | null;\r\n    modalIsOpen: boolean;\r\n    modalNumPedido: number | null;\r\n    modalBastidor: string | null;\r\n    modalModelo: string | null;\r\n    modalMatricula: string | null;\r\n    modalFechaEntrega: string | null;\r\n    loadedVehiculos: boolean;\r\n\r\n}\r\n\r\n\r\nexport interface Vehiculo {\r\n    numPedido: number;\r\n    bastidor: string;\r\n    modelo: string;\r\n    matricula: string;\r\n    fechaEntrega: string | null;\r\n}\r\n\r\n// -----------------\r\n// ACTIONS - These are serializable (hence replayable) descriptions of state transitions.\r\n// They do not themselves have any side-effects; they just describe something that is going to happen.\r\n\r\ninterface RequestTablaVehiculosAction {\r\n    page: number;\r\n    items: number;\r\n    type: 'REQUEST_VEHICULOS';\r\n}\r\n\r\ninterface ReceiveTablaVehiculosAction {\r\n    type: 'RECEIVE_VEHICULOS';\r\n    vehiculos: Vehiculo[];\r\n    loadedVehiculos: boolean;\r\n}\r\n\r\ninterface SelectVehiculoTablaVehiculosAction {\r\n    type: 'SELECT_VEHICULOS';\r\n    selectedVehiculo: Vehiculo | null;\r\n}\r\n\r\ninterface AddVehiculoTablaVehiculosAction {\r\n    type: 'ADD_VEHICULOS';\r\n    newVehiculo: Vehiculo | null | undefined;\r\n}\r\n\r\ninterface EditVehiculoTablaVehiculosAction {\r\n    type: 'EDIT_VEHICULO';\r\n    numPedido: number;\r\n    bastidor: string;\r\n    modelo: string;\r\n    matricula: string;\r\n    fechaEntrega: string | null;\r\n}\r\n\r\ninterface TypeNumPedidoTablaVehiculosAction {\r\n    type: 'TYPE_NUM_PEDIDO';\r\n    numPedido: number;\r\n}\r\ninterface TypeBastidorTablaVehiculosAction {\r\n    type: 'TYPE_BASTIDOR';\r\n    bastidor: string;\r\n}\r\ninterface TypeDataCreateTablaVehiculosAction {\r\n    type: 'TYPE_DATA_CREATE';\r\n    data: string;\r\n    dataType: string;\r\n}\r\ninterface TypeMatriculaTablaVehiculosAction {\r\n    type: 'TYPE_MATRICULA';\r\n    matricula: number;\r\n}\r\ninterface TypeFechaEntregaTablaVehiculosAction {\r\n    type: 'TYPE_FECHA_ENTREGA';\r\n    selectedVehiculo: Vehiculo | null;\r\n}\r\n\r\ninterface CloseModalTablaVehiculosAction {\r\n    type: 'CLOSE_MODAL';\r\n    selectedVehiculo: Vehiculo | null;\r\n}\r\n\r\ninterface OpenEmptyModalTablaVehiculosAction {\r\n    type: 'OPEN_EMPTY_MODAL';\r\n}\r\n\r\ninterface ChangeItemsTablaVehiculosAction {\r\n    type: 'CHANGE_ITEMS';\r\n    numItems: number;\r\n}\r\ninterface NextPageTablaVehiculosAction {\r\n    type: 'NEXT_PAGE';\r\n    newPage: number;\r\n}\r\n\r\ninterface PreviousPageTablaVehiculosAction {\r\n    type: 'PREVIOUS_PAGE';\r\n    newPage: number;\r\n}\r\n\r\n\r\ninterface TypeDataEditTablaVehiculosAction {\r\n    type: 'TYPE_DATA_EDIT';\r\n    selectedVehiculo: Vehiculo | null;\r\n}\r\n\r\n\r\n// Declare a 'discriminated union' type. This guarantees that all references to 'type' properties contain one of the\r\n// declared type strings (and not any other arbitrary string).\r\ntype KnownAction =\r\n    RequestTablaVehiculosAction |\r\n    ReceiveTablaVehiculosAction |\r\n    SelectVehiculoTablaVehiculosAction |\r\n    AddVehiculoTablaVehiculosAction |\r\n    CloseModalTablaVehiculosAction |\r\n    OpenEmptyModalTablaVehiculosAction |\r\n    ChangeItemsTablaVehiculosAction |\r\n    NextPageTablaVehiculosAction |\r\n    PreviousPageTablaVehiculosAction |\r\n    EditVehiculoTablaVehiculosAction |\r\n    TypeNumPedidoTablaVehiculosAction |\r\n    TypeBastidorTablaVehiculosAction |\r\n    TypeDataCreateTablaVehiculosAction |\r\n    TypeMatriculaTablaVehiculosAction |\r\n    TypeFechaEntregaTablaVehiculosAction |\r\n    TypeDataEditTablaVehiculosAction\r\n\r\n\r\n\r\n// ----------------\r\n// ACTION CREATORS - These are functions exposed to UI components that will trigger a state transition.\r\n// They don't directly mutate state, but they can have external side-effects (such as loading data).\r\n\r\nexport const actionCreators = {\r\n    requestVehiculos: (page: number, items: number): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        // Only load data if it's something we don't already have (and are not already loading)\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            fetch(apiUrl + 'api/vehiculos/getVehiculos?Page=' + page + '&Items=' + items, {\r\n                method: 'GET',\r\n                referrerPolicy: 'strict-origin-when-cross-origin',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'mode': 'cors',\r\n                    'Origin': apiUrl\r\n                }\r\n            }).then(response => response.json() as Promise<Vehiculo[]>)\r\n                .then(data => {\r\n                    dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data, loadedVehiculos: true });\r\n                });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: [], loadedVehiculos: false });\r\n        }\r\n    },\r\n\r\n    selectVehiculo: (v: Vehiculo): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            var newSelectedVehiculo = { ...v };\r\n            dispatch({ type: 'SELECT_VEHICULOS', selectedVehiculo: newSelectedVehiculo });\r\n        }\r\n    },\r\n\r\n    addVehiculo: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            var newVehiculo: Vehiculo;\r\n            newVehiculo = {\r\n                numPedido: appState.tablaVehiculos.modalNumPedido == null ? 0 : appState.tablaVehiculos.modalNumPedido,\r\n                bastidor: appState.tablaVehiculos.modalBastidor == null ? \"\" : appState.tablaVehiculos.modalBastidor,\r\n                modelo: appState.tablaVehiculos.modalModelo == null ? \"\" : appState.tablaVehiculos.modalModelo,\r\n                matricula: appState.tablaVehiculos.modalMatricula == null ? \"\" : appState.tablaVehiculos.modalMatricula,\r\n                fechaEntrega: appState.tablaVehiculos.modalFechaEntrega == null ? \"\" : appState.tablaVehiculos.modalFechaEntrega\r\n            };\r\n            console.log(newVehiculo);\r\n            fetch(apiUrl + 'api/vehiculos/addVehiculo', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'mode': 'cors'\r\n                },\r\n                body: JSON.stringify(newVehiculo)\r\n            })\r\n                .then(response => response.json() as Promise<Vehiculo[]>)\r\n                .then(data => {\r\n                    dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data, loadedVehiculos: true });\r\n                });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: [], loadedVehiculos: false });\r\n        }\r\n    },\r\n\r\n    editVehiculo: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            var v = appState.tablaVehiculos.selectedVehiculo;\r\n            fetch(apiUrl + 'api/vehiculos/update', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'mode': 'cors'\r\n                },\r\n                body: JSON.stringify(v)\r\n            })\r\n                .then(response => response.json() as Promise<Vehiculo[]>)\r\n                .then(data => {\r\n                    dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data, loadedVehiculos: true });\r\n                });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: [], loadedVehiculos: false });\r\n        }\r\n    },\r\n\r\n    deleteVehiculo: (v: Vehiculo): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            fetch(apiUrl + 'api/vehiculos/delete', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                    'mode': 'cors'\r\n                },\r\n                body: JSON.stringify(v)\r\n            })\r\n                .then(response => response.json() as Promise<Vehiculo[]>)\r\n                .then(data => {\r\n                    dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data, loadedVehiculos: true });\r\n                });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: [], loadedVehiculos: false });\r\n        }\r\n    },\r\n\r\n\r\n    closeModal: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            dispatch({ type: 'CLOSE_MODAL', selectedVehiculo: null });\r\n        }\r\n    },\r\n\r\n    openEmptyModal: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            dispatch({ type: 'OPEN_EMPTY_MODAL' });\r\n        }\r\n    },\r\n\r\n    changeItems: (newNumItems: number): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            fetch(apiUrl + 'api/vehiculos/getVehiculos?Page=' + appState.tablaVehiculos.page + '&Items=' + newNumItems, {\r\n                method: 'GET',\r\n                referrerPolicy: 'strict-origin-when-cross-origin',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'mode': 'cors',\r\n                    'Origin': apiUrl\r\n                }\r\n            }).then(response => response.json() as Promise<Vehiculo[]>)\r\n                .then(data => {\r\n                    dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data, loadedVehiculos: true });\r\n\r\n                    dispatch({ type: 'CHANGE_ITEMS', numItems: newNumItems });\r\n                });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: [], loadedVehiculos: false });\r\n        }\r\n\r\n    },\r\n\r\n\r\n    nextPage: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n\r\n            var correctNewPage = appState.tablaVehiculos.page + 1;\r\n            if (appState.tablaVehiculos.items == 0) {\r\n                correctNewPage = 0;\r\n            }\r\n            fetch(apiUrl + 'api/vehiculos/getVehiculos?Page=' + correctNewPage + '&Items=' + appState.tablaVehiculos.items, {\r\n                method: 'GET',\r\n                referrerPolicy: 'strict-origin-when-cross-origin',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'mode': 'cors',\r\n                    'Origin': apiUrl\r\n                }\r\n            }).then(response => response.json() as Promise<Vehiculo[]>)\r\n                .then(data => {\r\n                    dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data, loadedVehiculos: true });\r\n                    dispatch({ type: 'NEXT_PAGE', newPage: correctNewPage });\r\n                });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: [], loadedVehiculos: false });\r\n        }\r\n\r\n    },\r\n\r\n    previousPage: (): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            var correctNewPage = appState.tablaVehiculos.page - 1;\r\n            if (correctNewPage < 0) {\r\n                correctNewPage = 0;\r\n            }\r\n\r\n            fetch(apiUrl + 'api/vehiculos/getVehiculos?Page=' + correctNewPage + '&Items=' + appState.tablaVehiculos.items, {\r\n                method: 'GET',\r\n                referrerPolicy: 'strict-origin-when-cross-origin',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'mode': 'cors',\r\n                    'Origin': apiUrl\r\n                }\r\n            }).then(response => response.json() as Promise<Vehiculo[]>)\r\n                .then(data => {\r\n                    dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: data, loadedVehiculos: true });\r\n                    dispatch({ type: 'PREVIOUS_PAGE', newPage: correctNewPage });\r\n                });\r\n\r\n            dispatch({ type: 'RECEIVE_VEHICULOS', vehiculos: [], loadedVehiculos: false });\r\n        }\r\n    },\r\n\r\n    typeFechaEntrega: (d: string): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            var currentSelectedVehiculo = appState.tablaVehiculos.selectedVehiculo;\r\n            if (currentSelectedVehiculo != null && currentSelectedVehiculo.fechaEntrega != undefined) {\r\n                currentSelectedVehiculo.fechaEntrega = d;\r\n            }\r\n            dispatch({ type: 'TYPE_FECHA_ENTREGA', selectedVehiculo: currentSelectedVehiculo });\r\n        }\r\n    },\r\n\r\n    typeData: (data: string, dataType: string): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            dispatch({ type: 'TYPE_DATA_CREATE', data: data, dataType: dataType });\r\n        }\r\n    },\r\n\r\n    editSelectedVehiculo: (data: string, dataType: string): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n        const appState = getState();\r\n        if (appState && appState.tablaVehiculos) {\r\n            var editedSelectedVehiculo = { ...appState.tablaVehiculos.selectedVehiculo };\r\n            switch (dataType) {\r\n                case 'NumPedido':\r\n                    editedSelectedVehiculo.numPedido = parseInt(data);\r\n                    break;\r\n                case 'Bastidor':\r\n                    editedSelectedVehiculo.bastidor = data;\r\n                    break;\r\n                case 'Modelo':\r\n                    editedSelectedVehiculo.modelo = data;\r\n                    break;\r\n                case 'Matricula':\r\n                    editedSelectedVehiculo.matricula = data;\r\n                    break;\r\n                case 'FechaEntrega':\r\n                    editedSelectedVehiculo.fechaEntrega = data;\r\n                    break;\r\n            }\r\n            dispatch({ type: 'TYPE_DATA_EDIT', selectedVehiculo: editedSelectedVehiculo });\r\n        }\r\n    }\r\n\r\n\r\n};\r\n\r\n// ----------------\r\n// REDUCER - For a given state and action, returns the new state. To support time travel, this must not mutate the old state.\r\n\r\nconst unloadedState: TablaVehiculosState =\r\n{\r\n    vehiculos: [\r\n        { numPedido: 1, bastidor: \"21\", matricula: \"4139HJK\", modelo: \"Seat Ibiza\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 2, bastidor: \"22\", matricula: \"4139HJL\", modelo: \"Seat Tarraco\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 3, bastidor: \"23\", matricula: \"4139HJM\", modelo: \"Seat Marbella\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 4, bastidor: \"22\", matricula: \"4139HJN\", modelo: \"Fiat Multipla\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 5, bastidor: \"23\", matricula: \"4139HJO\", modelo: \"Nissan Patrol\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 6, bastidor: \"22\", matricula: \"4139HJP\", modelo: \"Opel Corsa\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 7, bastidor: \"23\", matricula: \"4139HJQ\", modelo: \"Opel Astra\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 8, bastidor: \"22\", matricula: \"4139HJR\", modelo: \"Seat León\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 9, bastidor: \"23\", matricula: \"4139HJS\", modelo: \"Dacia Sandero\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 10, bastidor: \"22\", matricula: \"4139HJT\", modelo: \"Audi TT\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 11, bastidor: \"23\", matricula: \"4139HJU\", modelo: \"Peugeot 206\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 12, bastidor: \"22\", matricula: \"4139HJV\", modelo: \"Peugeot 207\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 13, bastidor: \"23\", matricula: \"4139HJW\", modelo: \"Peugeot 208\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 14, bastidor: \"22\", matricula: \"4139HJX\", modelo: \"Peugeot 307\", fechaEntrega: \"2022-05-27\" },\r\n        { numPedido: 15, bastidor: \"23\", matricula: \"4139HJY\", modelo: \"Volkswagen Golf\", fechaEntrega: \"2022-05-27\" }\r\n    ],\r\n    items: 10,\r\n    page: 0,\r\n    isLoading: false,\r\n    selectedVehiculo: null,\r\n    modalIsOpen: false,\r\n    modalNumPedido: null,\r\n    modalBastidor: null,\r\n    modalModelo: null,\r\n    modalMatricula: null,\r\n    modalFechaEntrega: null,\r\n    loadedVehiculos: false\r\n};\r\n\r\nexport const reducer: Reducer<TablaVehiculosState> = (state: TablaVehiculosState | undefined, incomingAction: Action): TablaVehiculosState => {\r\n    if (state === undefined) {\r\n        return unloadedState;\r\n    }\r\n\r\n    const action = incomingAction as KnownAction;\r\n    switch (action.type) {\r\n        case 'REQUEST_VEHICULOS':\r\n            return {\r\n                ...state,\r\n                isLoading: true\r\n            };\r\n        case 'RECEIVE_VEHICULOS':\r\n            // Only accept the incoming data if it matches the most recent request. This ensures we correctly\r\n            // handle out-of-order responses.\r\n            return {\r\n                ...state,\r\n                vehiculos: action.vehiculos,\r\n                modalIsOpen: false,\r\n                isLoading: false,\r\n                page: 0,\r\n                items:10,\r\n                selectedVehiculo: null,\r\n                loadedVehiculos: action.loadedVehiculos,\r\n                modalBastidor: null,\r\n                modalNumPedido: null,\r\n                modalMatricula: null,\r\n                modalModelo: null,\r\n                modalFechaEntrega: null\r\n            };\r\n        case 'SELECT_VEHICULOS':\r\n            return {\r\n                ...state,\r\n                selectedVehiculo: action.selectedVehiculo,\r\n                modalIsOpen: true\r\n            };\r\n        case 'ADD_VEHICULOS':\r\n            return {\r\n                ...state,\r\n                isLoading: true\r\n            };\r\n        case 'OPEN_EMPTY_MODAL':\r\n            return {\r\n                ...state,\r\n                modalIsOpen: true,\r\n                selectedVehiculo: null\r\n            };\r\n\r\n        case 'CLOSE_MODAL':\r\n            return {\r\n                ...state,\r\n                modalIsOpen: false,\r\n                selectedVehiculo: null,\r\n                modalBastidor: null,\r\n                modalFechaEntrega: null,\r\n                modalMatricula: null,\r\n                modalModelo: null,\r\n                modalNumPedido: null\r\n            };\r\n        case 'CHANGE_ITEMS':\r\n            return {\r\n                ...state,\r\n                items: action.numItems\r\n            };\r\n        case 'NEXT_PAGE':\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n\r\n        case 'PREVIOUS_PAGE':\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case 'TYPE_FECHA_ENTREGA':\r\n            return {\r\n                ...state,\r\n                selectedVehiculo: action.selectedVehiculo\r\n            };\r\n        case 'TYPE_DATA_CREATE':\r\n            switch (action.dataType) {\r\n                case 'NumPedido':\r\n                    return {\r\n                        ...state,\r\n                        modalNumPedido: parseInt(action.data)\r\n                    }\r\n                case 'Bastidor':\r\n                    return {\r\n                        ...state,\r\n                        modalBastidor: action.data\r\n                    }\r\n                case 'Modelo':\r\n                    return {\r\n                        ...state,\r\n                        modalModelo: action.data\r\n                    }\r\n                case 'Matricula':\r\n                    return {\r\n                        ...state,\r\n                        modalMatricula: action.data\r\n                    }\r\n                case 'FechaEntrega':\r\n                    return {\r\n                        ...state,\r\n                        modalFechaEntrega: action.data\r\n                    }\r\n                default:\r\n                    return state;\r\n\r\n            };\r\n        case 'TYPE_DATA_EDIT':\r\n            return {\r\n                ...state,\r\n                selectedVehiculo: action.selectedVehiculo\r\n            };\r\n\r\n        default:\r\n            return state;\r\n\r\n\r\n    }\r\n\r\n};\r\n"]},"metadata":{},"sourceType":"module"}